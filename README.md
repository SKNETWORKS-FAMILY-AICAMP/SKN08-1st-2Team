# SKN08-1st-2Team

<div align="center">
  <img src="https://capsule-render.vercel.app/api?type=waving&color=0:000000,70:003300,100:00FF00&height=240&text=SKN08-1st-2Team&animation=&fontColor=00FF00&fontSize=90" width="1000" />
  
  <img width="1000" alt="image" src="https://github.com/Jh-jaehyuk/Jh-jaehyuk.github.io/assets/126551524/7ea63fc3-95f0-44d5-a0f0-cf431cae34f1"> 
  
  [![Hits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https://github.com/SKNETWORKS-FAMILY-AICAMP/SKN08-1st-2Team&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false)](https://hits.seeyoufarm.com)
</div>



# 0. Introduction Team (íŒ€ ì†Œê°œ)
### âœ… íŒ€ëª… : COTRIS
<table align=center>
  <tbody>
    <tr>
      <td align=center><b>ë°•ì£¼í¬</b></td>
      <td align=center><b>ìµœë³‘ì¤€</b></td>
      <td align=center><b>ì¡°ì¤€í¬</b></td>
      <td align=center><b>ì˜¤ë¯¼ìˆ˜</b></td>
    </tr>
    <tr>
      <td align="center">
        <div>
          <img src="https://cdn.discordapp.com/attachments/1314480175118815272/1314484992184680459/371c2fe51ed1cd9d.png?ex=6753f10c&is=67529f8c&hm=ddaaffbbd84c96501c5845308911eebdbb122c5e7f5d981cc3e38b25c622ba39&"width="200px; alt=""/>
        </div>
      </td>
      <td align="center">
        <div>
          <img src="https://avatars.githubusercontent.com/u/188127748?v=4"width="200px; alt=""/>
        </div>
      </td>
      <td align="center">
        <img src="https://avatars.githubusercontent.com/u/188949785?v=4"width="200px; alt=""/>
      </td>
      <td align="center">
        <img src="https://cdn.discordapp.com/attachments/1314491560972259388/1314491631646412873/2024-12-06_4.19.04.png?ex=6753f73b&is=6752a5bb&hm=eb1a84cdbff28ee5a9e9f4095db117c4b41916ce54ee9844d94f97c78119b1b3&"width="200px; alt=""/>
      </td>
    </tr>
    <tr>
      <td><a href="https://github.com/Joey9797"><div align=center>@Joey9797</div></a></td>
      <td><a href="https://github.com/ChoiByuengJun"><div align=center>@ChoiByuengJun</div></a></td>
      <td><a href="https://github.com/CodeLego8"><div align=center>@CodeLego8</div></a></td>
      <td><a href="https://github.com/yooodleee"><div align=center>@yooodleee</div></a></td>
    </tr>
  </tbody>
</table>
<br><br><br>



# 1. Introduction Project (í”„ë¡œì íŠ¸ ê°œìš”)

### âœ…í”„ë¡œì íŠ¸ ëª…
ë…¼ë¬¸ ìš”ì•½ ë° ì„¤ëª… ì œê³µ ì„œë¹„ìŠ¤

### âœ…í”„ë¡œì íŠ¸ ì†Œê°œ
ë…¼ë¬¸ ìš”ì•½ ë° ì„¤ëª… ì œê³µ ì„œë¹„ìŠ¤

### âœ…í”„ë¡œì íŠ¸ í•„ìš”ì„±(ë°°ê²½)
- ìƒˆë¡œìš´ ê¸°ìˆ ì— ëŒ€í•œ ì—°êµ¬ê°€ ê³¼ê±° ëŒ€ë¹„ ë§¤ìš° ë¹ ë¥¸ ì†ë„ë¡œ ë°œí‘œë˜ê³  ìˆìŠµë‹ˆë‹¤.
- ì´ì— ìƒˆë¡œìš´ ê¸°ìˆ ì„ ë…¼ë¬¸ì„ í†µí•´ ì ‘í•˜ê³ ì í•˜ëŠ” ë‹ˆì¦ˆê°€ ë°œìƒí•˜ê³  ìˆìŒì„ ë°œê²¬í•˜ì˜€ê³ , ì´ëŸ¬í•œ ë‹ˆì¦ˆë¥¼ ì¶©ì¡±ì‹œí‚¤ê¸° ìœ„í•´ ë…¼ë¬¸ì„ ì½ì„ ìˆ˜ ìˆëŠ” ë°©ì‹ì„ LLMì„ í†µí•´ ì œê³µí•˜ì—¬ ë§ì€ ì‚¬ëŒë“¤ì´ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ì„œë¹„ìŠ¤í™”í•˜ê³ ì í•©ë‹ˆë‹¤.

### âœ…í”„ë¡œì íŠ¸ ëª©í‘œ
1. Front-Endì—ì„œëŠ” **TypeScript**ì™€ **Vue.js + Vuetify3**ë¥¼ ì´ìš©í•˜ì—¬ ì‚¬ìš©ì ì¸¡ë©´ì—ì„œ ìœ ë¦¬í•œ UI-UXë¥¼ êµ¬ì¶•í•˜ì˜€ê³ , **Axios** ë¥¼ í†µí•´ì„œ ì˜¬ë°”ë¥¸ Requestë¥¼ í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ ì‚¼ì•˜ìŠµë‹ˆë‹¤. 
2. Back-Endì—ì„œëŠ” **Python**ê³¼ **Django**, **MySQL** ë“±ì„ ì´ìš©í•˜ì—¬ Requestì— ëŒ€í•œ ì •í™•í•œ Responseì™€ ì›í™œí•œ ì›¹ì‚¬ì´íŠ¸ ìš´ì˜í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ ì‚¼ì•˜ìŠµë‹ˆë‹¤.
3. Fast APIì—ì„œëŠ” **Machine Learning** **Deep Learning** ì´ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ë¶„ì„ ë° ì˜ˆì¸¡í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
4. Deep Learning Local Server (DLLS) ì—ì„œëŠ” **Fast APIì™€ AI Clientì˜ ë¹„ë™ê¸° í†µì‹  í™˜ê²½**ì„ ì†Œì¼“ í†µì‹ ìœ¼ë¡œ êµ¬ì¶•í•˜ì—¬ ì¼ë°˜ì ì¸ ë™ê¸° Requestë“¤ì´ ì²˜ë¦¬ë  ë•Œ, ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ êµ¬ì¶•í•˜ì˜€ìŠµë‹ˆë‹¤.
5. CI-CDëŠ” ì§€ì†ì ì¸ ì½”ë“œ í†µí•©ê³¼ ì§€ì†ì ì¸ ë°°í¬ë¥¼ í†µí•´ ê¶ê·¹ì ìœ¼ë¡œ ê°œë°œ ì†ë„ë¥¼ ë†’ì´ê³ , ì½”ë“œ í’ˆì§ˆì„ ìœ ì§€í•˜ë©°, ê°œë°œê³¼ ìš´ì˜ì˜ ê²½ê³„ë¥¼ í—ˆë¬¼ë©° ì‹ ì†í•˜ê²Œ ê°€ì¹˜ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ ì‚¼ì•˜ìŠµë‹ˆë‹¤. 
<br><br><br>



# 2. Tech Stack (ê¸°ìˆ  ìŠ¤íƒ)

>### <span style="color:cyan"> Co-Work Tool </span>
<table>
  <tr>
    <td>Communication & Messenger</td>
    <td><img src="https://img.shields.io/badge/Discord-5865F2?style=flat&logo=Discord&logoColor=white"/></td>
    <td><img src="https://img.shields.io/badge/Notion-000000?style=flat&logo=Notion&logoColor=white"/></td>
    <td><img src="https://img.shields.io/badge/Slack-4A154B?style=flat&logo=Slack&logoColor=white"/></td>
  </tr>
  <tr>
    <td>Development & Merge</td>
    <td><img src="https://img.shields.io/badge/Git-F05032?style=flat&logo=Git&logoColor=white"/></td>
    <td><img src="https://img.shields.io/badge/GitHub-181717?style=flat&logo=GitHub&logoColor=white"/></td>
    
</table>

>### <span style="color:cyan"> Frontend </span>
<table>
  </tr>
  <tr>
    <td>Markup & Style & JS</td>
    <td><img src="https://img.shields.io/badge/HTML-E34F26?style=flat&logo=html5&logoColor=white"/></td>
    <td><img src="https://img.shields.io/badge/css-1572B6?style=flat&logo=css3&logoColor=white"/></td>
</table>

>### <span style="color:cyan"> Backend </span>
<table>
  <tr>
    <td>BE IDE & Language</td>
    <td><img src="https://img.shields.io/badge/pycharm-%23000000?style=flat&logo=pycharm&logoColor=white"/></td>
    <td><img src="https://img.shields.io/badge/python-3776AB?style=flat&logo=python&logoColor=white"/></td>
  </tr>  
  <tr>
    <td>RDBMS</td>
    <td><img src="https://img.shields.io/badge/mysql-4479A1?style=flat&logo=mysql&logoColor=white"/></td>
    <td></td>
  </tr>
  
</table>
<br><br><br>



# 3. ì‹œìŠ¤í…œ êµ¬ì„±ë„
![image](https://github.com/user-attachments/assets/66a78240-b41d-487a-8800-29bccbab7d41)
<br><br><br>



## ì• ìì¼ ë³´ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
```c
ê³¼ê±° ì •ì˜ì„œë“¤ì„ ì¼ì¼íˆ ì‘ì„±í•˜ì˜€ì§€ë§Œ ë¹ ë¥¸ ì†ë„ë¡œ ë¬´ì–¸ê°€ë¥¼ ê°œë°œí•˜ëŠ”ë° í•œê³„ê°€ ìˆìŠµë‹ˆë‹¤.
ì²˜ìŒë¶€í„° ë§ì€ ê²ƒë“¤ì„ ë¹Œë“œì—…í•˜ë©´ì„œ ë¹ ë¥¸ ìƒì‚°ì„±ì„ ê¸°ë°˜ìœ¼ë¡œ ì›€ì§ì´ë ¤ë©´ ë°˜ë“œì‹œ ì• ìì¼í•´ì•¼í•©ë‹ˆë‹¤.
ê³ ë¡œ í­í¬ìˆ˜ ì„¤ê³„ ë°©ì‹ì´ ì•„ë‹Œ ì• ìì¼ í”„ë¡œì„¸ìŠ¤ ë°©ì‹ìœ¼ë¡œ ì• ìì¼ ë³´ë“œë¥¼ ì‘ì„±í•˜ë©´ì„œ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

ì• ìì¼ ë³´ë“œëŠ” ìì²´ì ìœ¼ë¡œ ì œëª©ì´ ìš”êµ¬ ì‚¬í•­ì„ ë‚´í¬í•˜ë©° ê° ì¹´ë“œ ë‚´ë¶€ì—ëŠ” ì •ì˜í•œ Domainì˜ ì„¸ë¶€ ì‚¬í•­ì´ ê¸°ë¡ë©ë‹ˆë‹¤.
ê³ ë¡œ ë¹ ë¥´ê²Œ íŒ€ì›ë“¤ê³¼ í˜‘ì—… í•  ìˆ˜ ìˆê³  ì†Œí†µ ë¹„ìš©ì„ ìµœì†Œí™”ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì‘ì€ ê²ƒ ê°™ì§€ë§Œ ì´ì™€ ê°™ì€ ê²ƒë“¤ì´ ìŒ“ì—¬ì„œ ì•„ì£¼ ê¸°ë¯¼í•˜ê³  ë¯¼ì²©í•œ ì¡°ì§ì„ ë§Œë“¤ì–´ ëƒ…ë‹ˆë‹¤.
```
# 4. ì• ìì¼ ë³´ë“œ
### âœ… Frontend - Frontend í˜ì´ì§€ë¥¼ Vue ë¡œ êµ¬ì„± (í™”ë©´ ì„¤ê³„ì„œ)
![image](https://github.com/user-attachments/assets/b547b885-25f8-413f-ab40-3251e8b77e95)
![image](https://github.com/user-attachments/assets/b947d9db-b2d1-4494-8842-82285289d6ff)
<br><br><br>

### âœ… Backend - Backend ë°ì´í„° ê´€ë¦¬ë¡œ Django êµ¬ì„±(ìš”êµ¬ ì‚¬í•­ ì •ì˜ì„œ)
![image](https://github.com/user-attachments/assets/89ece460-81bd-44cf-bc7d-644487b3b267)
<br><br><br>

### âœ… FastAPI - AI ì„œë¹™ìš©ìœ¼ë¡œ FastAPI êµ¬ì„±
![image](https://github.com/user-attachments/assets/ccd6592b-4e7c-4fab-a7fe-6f16e8515195)
<br><br><br>

### âœ… AI Client - ë¹„ìš© ìµœì í™”ë¥¼ ìœ„í•´ DLLS êµ¬ì„± (ëª¨ë¸ íŒŒì¸íŠœë‹ ë° ì¶”ë¡  ì„¤ê³„ì„œ)
![image](https://github.com/user-attachments/assets/ee098b0b-77b0-4e53-9a47-836e61081638)
<br><br><br>



# 5. ë¹„ìš© ìµœì í™”ë¥¼ ìœ„í•œ Deep Learning Local Server êµ¬ì„± + ë³´ì•ˆ ì„¤ì •ì„ ìœ„í•œ TLS / SSL ì†Œì¼“ êµ¬ì„±
### 5-1 Socket Server (FastAPI) êµ¬ì„± ë° êµ¬ë™ ë°©ë²•
(1) FastAPI í”„ë¡œì íŠ¸ í´ë” ë‚´ì—ì„œ ë¯¸ë¦¬ êµ¬ì„±í•´ ë†“ì€ ì†Œì¼“ í†µì‹  ê´€ë ¨ submoduleì„ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì—°ê²°í•©ë‹ˆë‹¤.
```bash
git submodule add "socket server submodule Github ì£¼ì†Œ" template
```

(2) ë‹¤ìŒê³¼ ê°™ì´ `template` ë¼ëŠ” submoduleì´ í”„ë¡œì íŠ¸ ë‚´ë¶€ì— ë¶™ì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
![image](https://github.com/user-attachments/assets/fc83fd3b-3cf0-4852-a6e1-c143afb3eed3)
(3) ì´í›„ì— `cd include/socket_server/`ì— ì†Œì¼“ ì„œë²„ì˜ ì—­í• ì„ í•˜ë„ë¡ í•´ë†“ì€ ëª¨ë“ˆì— ëŒ€í•œ ë‚´ìš©ë“¤ì„ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¡œ ê°±ì‹ ì‹œí‚µë‹ˆë‹¤.
![image](https://github.com/user-attachments/assets/1bf1190e-1aad-45d9-ad6b-d44090f88c0f)
```bash
cd ../..
git submodule update --init --recursive
```
(4) ê·¸ëŸ¬ë©´ ì•„ë˜ì²˜ëŸ¼ ë‚´ìš©ë“¤ì´ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
![image](https://github.com/user-attachments/assets/bb624477-e11a-461c-a532-63389108c566)

(5) ì´í›„ ë¯¸ë¦¬ ì¤€ë¹„í•´ë†“ì€ ë³´ì•ˆ ê´€ë ¨ íŒŒì¼ë“¤ì„ í”„ë¡œì íŠ¸ í´ë”ì— ë°°ì¹˜ì‹œí‚µë‹ˆë‹¤.
```bash
CA.pem
svr.key
svr.crt
```

(6) ì„œë²„ë¥¼ êµ¬ë™ì‹œí‚¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ai-clientì˜ ì ‘ì†ì„ ëŒ€ê¸°í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
![image](https://github.com/user-attachments/assets/dbdf40fe-1fc0-4e15-9c05-73618d202e63)

### 5-2 Socket Client (ai-client) êµ¬ì„± ë° êµ¬ë™ ë°©ë²•
(1) ai-client í”„ë¡œì íŠ¸ í´ë” ë‚´ì—ì„œ ì†Œì¼“ ì„œë²„ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë¯¸ë¦¬ êµ¬ì„±í•´ ë†“ì€ ì†Œì¼“ í†µì‹  ê´€ë ¨ submoduleì„ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì—°ê²°í•©ë‹ˆë‹¤.
```bash
git submodule add "socket client submodule Github ì£¼ì†Œ" template
```

(2) ë‹¤ìŒê³¼ ê°™ì´ `template` ë¼ëŠ” submoduleì´ í”„ë¡œì íŠ¸ ë‚´ë¶€ì— ë¶™ì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
![image](https://github.com/user-attachments/assets/7340470c-97c3-4ee4-ab18-d52bbc6a8c83)

(3) ì´í›„ ë¯¸ë¦¬ ì¤€ë¹„í•´ë†“ì€ ë³´ì•ˆ ê´€ë ¨ íŒŒì¼ë“¤ì„ í”„ë¡œì íŠ¸ í´ë”ì— ë°°ì¹˜ì‹œí‚µë‹ˆë‹¤.
```bash
CA.pem
client.key
client.crt
```

(4) ì„œë²„ë¥¼ êµ¬ë™ì‹œí‚¨ ìƒíƒœì—ì„œ ai-clientë¥¼ êµ¬ë™í•˜ì—¬ socket serverë¡œ ì ‘ì†ì„ ì‹œë„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì˜ ì ‘ì†ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ë¯¸ë¦¬ êµ¬ì„±í•œ ë³´ì•ˆ ì ‘ì†ë„ ì˜ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
![image](https://github.com/user-attachments/assets/98fdf151-ee23-41ba-a09d-fc1ac6ffd2d0)


# 6. ë°ì´í„° ì „ì²˜ë¦¬

## ë²¡í„° ì €ì¥ì†Œ
ê²€ìƒ‰ ì†ë„ í–¥ìƒì„ ìœ„í•´, FAISSë¥¼ ì‚¬ìš©í•˜ì—¬ ë²¡í„° ì €ì¥ì†Œë¥¼ ìƒì„± ë° ì €ì¥í•©ë‹ˆë‹¤. 
<br>FAISSë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í…ìŠ¤íŠ¸ë¥¼ ì²­í¬ ë‹¨ìœ„ë¡œ ë‚˜ëˆˆ í›„ Document í˜•íƒœë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

```python
def splitTextIntoDocuments(self, text, chunkSize=256, chunkOverlap=16):
    textSplitter = RecursiveCharacterTextSplitter(chunk_size=chunkSize, chunk_overlap=chunkOverlap)
    chunkList = textSplitter.split_text(text)

    documentList = [Document(page_content=chunk) for chunk in chunkList]
    return documentList
```
ì´í›„, ì„ë² ë”©ì„ í†µí•´ ë²¡í„°í™”ë¥¼ ì§„í–‰í•œ ë’¤ FAISSë¥¼ ì‚¬ìš©í•˜ì—¬ ë²¡í„° ì €ì¥ì†Œë¥¼ ìƒì„±í•˜ê³  ì €ì¥í•©ë‹ˆë‹¤.

```python
def createFAISS(self, documentList):
    embeddings = OpenAIEmbeddings()

    vectorstore = FAISS.from_documents(documentList, embeddings)
    print("success to create VectorStore")

    return vectorstore

def saveFAISS(self, vectorstore, dbPath):
    vectorstore.save_local(dbPath)
```

## TF-IDF ê¸°ë°˜ì˜ ë²¡í„° ì‚°ì¶œ
ì‚¬ìš©ìë¡œë¶€í„° ë…¼ë¬¸ ìš”ì•½ì„ ìš”ì²­ë°›ì•˜ì„ ë•Œ, ì „ì²´ í…ìŠ¤íŠ¸ë¥¼ ëª¨ë‘ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í…ìŠ¤íŠ¸ì˜ ê¸¸ì´ë¥¼ ì¤„ì´ëŠ” ì¶”ê°€ì ì¸ ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤.
<br>ë¨¼ì €, í…ìŠ¤íŠ¸ë¥¼ ë¬¸ì¥ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ê³  TF-IDF ë²¡í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
```python
sentences = sent_tokenize(mainText)

vectorizer = TfidfVectorizer().fit_transform(sentences)
vectors = vectorizer.toarray()
```
ë¬¸ì¥ ê°„ ìœ ì‚¬ë„ í–‰ë ¬ì„ ê³„ì‚°í•˜ê³ , ê·¸ ê¸°ë°˜ìœ¼ë¡œ ê·¸ë˜í”„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
```python
similarityMatrix = cosine_similarity(vectors)

nxGraph = nx.from_numpy_array(similarityMatrix)
scores = nx.pagerank(nxGraph)
```
ì ìˆ˜ì— ë”°ë¼ ë¬¸ì¥ì„ ì •ë ¬í•œ ë’¤, ì‚¬ìš©í•  ë¬¸ì¥ì˜ ìˆ˜ë¥¼ ì˜ ì„¤ì •í•˜ì—¬ ì„ íƒí•©ë‹ˆë‹¤.
```python
rankedSentences = sorted(((scores[i], s) for i, s in enumerate(sentences)), reverse=True)
top_n = 100
rankedText = " ".join([sentence for score, sentence in rankedSentences[:top_n]])
```

# 7. ëª¨ë¸
LLama3.0, LLama3.1, OpenAI API ë“± ì—¬ëŸ¬ ëª¨ë¸ì„ ì‚¬ìš©í•´ ë³´ê³ , ì…ë ¥ í† í° ìˆ˜ì™€ ì¶”ë¡  ì†ë„ë¥¼ ê³ ë ¤í•˜ì—¬
<br>ìµœì¢…ì ìœ¼ë¡œ OpenAIì˜ gpt-4o-mini ëª¨ë¸ì„ ì„ íƒí•˜ê³ , LangChainì„ í™œìš©í–ˆìŠµë‹ˆë‹¤.

## Basic
LLMê³¼ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì„ ì—°ê²°í•˜ì—¬ ì²´ì¸ì„ ë§Œë“¤ê³ , ì‚¬ìš©ìê°€ ë³´ë‚¸ ë©”ì‹œì§€(userSendMessage)ë¥¼ ë°›ì•„ question ë³€ìˆ˜ì— í•´ë‹¹í•˜ëŠ” ê°’ìœ¼ë¡œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì— ì ìš©í•˜ê³ , ì´ë¥¼ í†µí•´ LLMì´ í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ì‘ì—…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
```python
llm = ChatOpenAI(temperature=0.3, model_name="gpt-4o-mini")
prompt_template = PromptTemplate(
    input_variables=["question"],
    template=template
)

chain = LLMChain(llm=self.llm, prompt=prompt_template)
return {"generatedText": chain.run(userSendMessage)}
```

## ì§ˆì˜ ì‘ë‹µ
ë…¼ë¬¸ ê´€ë ¨ ì§ˆì˜ì‘ë‹µ ì‹œ, LLMì˜ ë‹¨ì ì¸'ì‚¬ì‹¤ ê´€ê³„ ì˜¤ë¥˜ ê°€ëŠ¥ì„±'ê³¼ 'ë§¥ë½ ì´í•´ì˜ ê´€ê³„'ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ RAG(Retrieval-Augmented Generation)ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
<br>LangChainì„ ì‚¬ìš©í•˜ì—¬ RAG ì²´ì¸ì„ êµ¬ì„±í•˜ê³ , ì‚¬ìš©ìì˜ ì…ë ¥ì„ ì²˜ë¦¬í•œ í›„ ê·¸ì— ëŒ€í•œ ë‹µë³€ì„ ìƒì„±í•©ë‹ˆë‹¤.
<br>LangChain í—ˆë¸Œì—ì„œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¨ ë’¤, RAGì²´ì¸ì„ êµ¬ì„±í•©ë‹ˆë‹¤. RAGëŠ” ì™¸ë¶€ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê³ , ì´ë¥¼ LLMì„ í†µí•´ ë‹µë³€ì„ ìƒì„±í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.
<br>vectorstore.as_retriever()ë¥¼ í†µí•´ ì „ì²˜ë¦¬ ê³¼ì •ì—ì„œ ìƒì„±ëœ FAISS ë²¡í„° ì €ì¥ì†Œì—ì„œ ë¬¸ì„œë¥¼ ê²€ìƒ‰í•˜ê³ , ì‚¬ìš©ìì˜ ì…ë ¥ê³¼ ìœ ì‚¬í•œ ë¬¸ì„œë¥¼ ê²°ê³¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
```python
def format_docs(docs):
    return "\n\n".join([doc.page_content for doc in docs])

userSendMessage = fileKey.split(".")[0] + " " + userSendMessage
prompt = hub.pull("godk/korean-rag", api_key=langchain_api_key)

rag_chain = (
    {"context": vectorstore.as_retriever() | format_docs, "question": RunnablePassthrough()}
    | prompt
    | self.llm
    | StrOutputParser()
)
return {"generatedText": rag_chain.invoke(userSendMessage)}
```

## ìš”ì•½
ë§ˆì°¬ê°€ì§€ë¡œ LLM ì²´ì¸ì„ ìƒì„±í•˜ê³  ì—¬ëŸ¬ ë¬¸ì„œë¥¼ í•˜ë‚˜ì˜ í…ìŠ¤íŠ¸ë¡œ ì±„ì›Œë„£ëŠ” StuffDocumentsChainì„ ì •ì˜í•©ë‹ˆë‹¤. ì „ì²˜ë¦¬ ê³¼ì •ìœ¼ë¡œ ì¤„ì—¬ì§„ ë¬¸ì„œí™”ëœ í…ìŠ¤íŠ¸ê°€ ì‹¤ì œ Inputì— í•´ë‹¹í•©ë‹ˆë‹¤.
<br>StuffDocumentsChainì„ í†µí•´ ë¬¸ì„œ ë‚´ìš©ì„ í”„ë¡¬í”„íŠ¸ì— ì‚½ì…í•œ í›„, LLMì„ ì‚¬ìš©í•´ ìš”ì•½ì„ ìƒì„±í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
```python
docs = [Document(page_content=rankedText, metadata={})]
prompt_template = """ì‹¤ì œë¡œ í”„ë¡¬í”„íŠ¸ê°€ ì‘ì„±ë˜ì–´ ìˆì§€ë§Œ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.
"""
prompt = PromptTemplate.from_template(prompt_template)
llm_chain = LLMChain(llm=self.llm, prompt=prompt)

stuff_chain = StuffDocumentsChain(llm_chain=llm_chain, document_variable_name="context")
output = stuff_chain.invoke({"input_documents": docs})
return {"generatedText": output["output_text"]}
```


# 8. Result (ìˆ˜í–‰ ê²°ê³¼)
### âœ… Frontend / Backend / FastAPI / DLLS êµ¬ì„±ì—ì„œ ëª¨ë“  ë™ì‘ì´ ì•ˆì •ì ìœ¼ë¡œ ì˜ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸
### âœ… FastAPI - DLLS êµ¬ì„±ì—ì„œ ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¥¸ LLM ë™ì‘ì´ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸
### âœ… êµ¬ì„±í•œ ì‚¬ìš©ì ì •ì˜í˜• í”„ë¡œí† ì½œì´ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸
### âœ… ì‹œì—° ê²°ê³¼ ëª¨ìŠµ

![image](https://github.com/user-attachments/assets/09b2e0f6-66a1-4288-a012-81d424b158e9) 
![image](https://github.com/user-attachments/assets/4f6940df-a192-43a9-a4d0-8e425dc25290)
![image](https://github.com/user-attachments/assets/026a0e22-7868-4cf3-9aad-6911ae90a7a6)
![image](https://github.com/user-attachments/assets/acebf5fb-cbfc-4053-96f8-57879e1ee081)
![image](https://github.com/user-attachments/assets/c4017585-5472-48d0-905b-ec3b713c7ce3) 
![image](https://github.com/user-attachments/assets/ffe79024-74c2-42b2-bab7-d759514eb208)  
![image](https://github.com/user-attachments/assets/fdb4576b-e308-4d77-a82b-237857b53184)
![image](https://github.com/user-attachments/assets/e86076e9-ed73-49d9-96f0-4ad491f83783)
![image](https://github.com/user-attachments/assets/cc0f7bb1-fe7f-4457-94ca-1195a3fba255)

<img width="435" alt="image" src="https://github.com/user-attachments/assets/8fda4dc2-8942-45df-9ff8-1f22092e54f6">

<br><br><br>

  
# 9. í•œ ì¤„ íšŒê³ 
ğŸ¤“<b>ë°•ì£¼í¬</b>  
_PYTHON ì´ë¼ëŠ” ì–¸ì–´ì— ëŒ€í•´ ë” ê¹Šê²Œ ì´í•´í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆê³ , ê·¸ ì´í•´ë¥¼ ë°”íƒ•ìœ¼ë¡œ DDD êµ¬ì¡°ì˜ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•œ ì½”ë“œ ì‘ì„±ì˜ ì¤‘ìš”ì„±ì„ ì²´ê°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤._

ğŸ‘¨â€ğŸ’»<b>ìµœë³‘ì¤€</b>  
_ê°œë°œì— ëŒ€í•´ ì²˜ìŒ ì ‘í•´ë³´ê³  ì–¸ì–´ì™€ ì½”ë“œ, í˜•ì‹ ë“± ë§ì€ ê²ƒì„ ë°°ìš°ê³ , ì•„ì§ ë”°ë¼í•˜ëŠ” ìˆ˜ì¤€ì´ì§€ë§Œ ë‚´ê°€ í•´ì•¼ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ì‹œê°„ì´ì˜€ìŠµë‹ˆë‹¤.

ğŸ˜º<b>ì¡°ì¤€í¬</b>  
_PYTHONì— ëŒ€í•´ ìƒˆë¡­ê²Œ ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì¸ DDDë¥¼ ë°°ìš¸ ìˆ˜ ìˆì–´ì„œ ì¢‹ì•˜ê³ , ì•„ì§ì€ ë”°ë¼ê°€ê¸°ì— ê¸‰ê¸‰í•˜ì§€ë§Œ ë…¸ë ¥í•´ì•¼í•˜ëŠ” ë°©í–¥ì„±ì„ ì•Œ ìˆ˜ ìˆì–´ì„œ ì¢‹ì•˜ìŠµë‹ˆë‹¤.

ğŸª<b>ì˜¤ë¯¼ìˆ˜</b>  
_í˜‘ì—…ì„ ìœ„í•œ DDD êµ¬ì¡° ì„¤ê³„, ê·¸ë¦¬ê³  ë°±ë¡œê·¸ ì‘ì„±ì„ í•˜ëŠ” ë™ì‹œì— ì• ìì¼ ë°©ì‹ìœ¼ë¡œ í˜‘ì—…ì´ ì§„í–‰ë˜ë©´ ìƒë‹¹íˆ íš¨ê³¼ì ì´ë©´ì„œë„ íš¨ìœ¨ì ìœ¼ë¡œ ì§„í–‰í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ë°°ìš¸ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤._
